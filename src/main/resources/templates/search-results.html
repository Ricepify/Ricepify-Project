<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Search Results</title>
    <script>
        function updateQueryOptions() {
            var searchTypeSelect = document.getElementById("searchType");
            var querySelect = document.getElementById("querySelect");
            var options = [];

            if (searchTypeSelect.value === "category") {
                options = ["Breakfast", "Beef", "Chicken", "Seafood", "Dessert"];
            } else if (searchTypeSelect.value === "area") {
                options = ["Egyptian", "Tunisian", "Turkish", "Greek", "Italian"];
            }

            // Clear existing options
            while (querySelect.options.length > 0) {
                querySelect.remove(0);
            }

            // Add new options
            for (var i = 0; i < options.length; i++) {
                var option = document.createElement("option");
                option.text = options[i];
                querySelect.add(option);
            }
        }
    </script>
    <style>
    nav {
      width: 100%;
      background-color: #f0eded;
      height: 70px;
      display: flex;
      align-items: center;
      justify-content: flex-end;
      position: fixed;
      top: 0;
      z-index: 1000;
        box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
    }

    nav .logo-container img {
      max-height: 100%;
    }

    nav ul {
      list-style-type: none;
      margin: 0;
      padding: 0;
    }

    nav li {
      float: right;
    }

    nav a {
      display: inline;
      color: #333;
      padding: 10px 16px;
      text-decoration: none;
    }

    nav a:hover {
      background-color: #ddd;
      color: black;
    }

    .image-container {
      width: 250px;
      height: 50px;
      overflow: visible;
    }

    .image-container img {
      width: 300px;
      height: 130px;
      position: absolute;
      top: 0;
      left: 0;
    }

    body {
      margin-top: 70px;
      margin-bottom: 50px;
    }
    .image-container img:hover {
      transform: scale(1.1);
      transition: transform 0.1s ease;
    }

    }
  </style>

</head>
<body>
<div th:replace="fragment/nav-header :: nav-bar"></div>
<h1>Search Form</h1>


<form action="/searchByAreaOrCategory" method="get">

    <select id="searchType" name="searchType" onchange="updateQueryOptions()">
        <option value="category">--Choose how you want to search--</option>
        <option value="category">Search by Category</option>
        <option value="area">Search by Area</option>
    </select>
    <select id="querySelect" name="query">

    </select>
    <button type="submit">Search</button>
</form>
</div>
<div id="search-results">
    <h2>Search Results</h2>
    <table>
        <thead>
        <tr>
            <th>Meal</th>
            <th>Image</th>
        </tr>
        </thead>
        <tbody>
        <!-- Use Thymeleaf to iterate and display search results here -->
        <tr th:each="meal : ${meals}">
            <td th:text="${meal.strMeal}"></td>
            <td><img th:src="${meal.strMealThumb}" alt="Meal Thumbnail" width="100" height="100" /></td>
        </tr>
        </tbody>
    </table>
</div></body>
</html>
